#### 停止-等待协议

<img src="https://guli-edu-tomo.oss-cn-beijing.aliyuncs.com/private/2021/9/18/1631942656975.png" style="zoom:67%;" />

- 为什要有该协议

    - 除了比特出差错, 底层信道还会出现丢包问题
    - 为了实现流量控制

- 前提

    - 虽然现在常用全双工通信方式,但为了讨论问题方便,仅考虑一方发送数据(发送方),一方接收数据(接收方)。
    - 因为是在讨论可靠传输的原理,所以并不考虑数据是在哪一个层次上传送的。
    - “停止等待”就是每发送完一个分组就停止发送,等待对方确认,在收到确认后再发送下一个分组。

- ##### 差错情况

    - 超时计时器

        - 每次发送一个帧就启动一个计时器
        - 超时计时器设置的重传时间当比帧传输的平均RTT更长一些
        - 发完一个帧后, 必须保留它的副本
        - 数据帧和确认帧必须编号, 可以解决帧丢失和重复问题

    - ACK丢失

        - 发送端超时重传
        - 接收端丢弃第二次发来的重复帧, 再次确认该帧

    - ACK迟到

        - 按确认帧丢失处理

        - 丢弃迟到确认帧

          <img src="https://guli-edu-tomo.oss-cn-beijing.aliyuncs.com/private/2021/9/18/1631941839434.png" style="zoom:67%;" />