# 实验项目三 停止等待ARQ算法模拟

<p align="right">Created by 胡海彬 on 2021/20/22</p>


![](https://guli-edu-tomo.oss-cn-beijing.aliyuncs.com/private/2021/10/27/ackProgram_Graph.png)

## 实验目的

在实现了两个程序通信的前提下，模拟实现停止等待ARQ协议。

要求模拟实现：

- 正常数据帧的通信过程
- 错误帧的通信过程
- 数据帧的丢失的通信过程

## 实验环境

- 运行windows 2007/xp操作系统的PC一台.

- 每台PC机安装有编程环境.

## 实验内容与步骤

按照如下算法进行实现：

<img src="https://guli-edu-tomo.oss-cn-beijing.aliyuncs.com/private/2021/9/18/1631941839434.png" style="zoom:67%;" />

### 发方程序：

1. 从主机取一个数据帧，送交发送缓存。

2. V(S)←0。

3. N(S)←V(S)。

4. 将发送缓存中的数据帧发送出去。

5. 设置超时计时器。

6. 等待。

7. 收到确认帧 ACKn，

   若 n = 1 – V(s)，则：

   ​      从主机取一个新的数据帧，放入发送缓存；

   ​      V(S)←[1 - V(S)]，转到 (3)。

   否则，丢弃这个确认帧，转到(6)。

8. 若超时计时器时间到，则转到(4)。



### 收方：

1. V(R)←0。

2. 等待。

3. 收到一个数据帧；

   若 CRC校验无误

   ​	若 N(S) = V(R)，则执行(4)；

   ​	否则丢弃此数据帧，然后转到(6)。

   否则丢弃此数据帧，然后转到(2)。

4. 将收到的数据帧中的数据部分送交上层软件

5. V(R)←[1 - V(R)]。

6. n←V(R)；

   发送确认帧 ACKn，转到(2)。


## 实验需要完成的功能

在实验一的基础上，模拟实现停止等待协议，完成下面功能：

- 正常数据帧的通信过程

- 错误帧的通信过程

- 数据帧的丢失的通信过程

